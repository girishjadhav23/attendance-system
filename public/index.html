<!DOCTYPE html>
<html>
<head>
  <title>Teacher Dashboard</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <h1>Attendance System</h1>

  <h2>Scan This QR</h2>
  <div id="qrcode"></div>

  <h2>Attendance Records</h2>
  <ul id="records"></ul>

  <!-- QR CODE SCRIPT -->
  <script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>
  <script>
    new QRCode(document.getElementById("qrcode"), {
      text: "https://attendance-system-sfd5.onrender.com/student.html",
      width: 220,
      height: 220
    });
  </script>

  <!-- RECORDS AUTO REFRESH -->
  <script>
    function loadRecords() {
      fetch("/records")
        .then(res => res.json())
        .then(data => {
          const list = document.getElementById("records");
          list.innerHTML = "";

          if (data.length === 0) {
            list.innerHTML = "<li>No attendance yet</li>";
            return;
          }

          data.forEach(item => {
            const li = document.createElement("li");
            li.innerText = `${item.studentId} | ${item.date} | ${item.time}`;
            list.appendChild(li);
          });
        })
        .catch(err => console.error("Error loading records", err));
    }

    loadRecords();
    setInterval(loadRecords, 3000);
  </script>

</body>
</html>
